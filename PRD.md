# KBO 야구장 기상 정보 및 우천 취소 예측 서비스 PRD

## 문서 정보
- **문서명**: Product Requirements Document (PRD)
- **버전**: 2.0
- **작성일**: 2025-12-02
- **최종 수정일**: 2025-12-02

## 1. 개요

### 1.1 목적
KBO(한국프로야구) 경기장의 기상 정보를 제공하고, KBO 리그 우천 취소 기준에 따라 경기 취소 확률을 예측하는 웹 애플리케이션입니다.

### 1.2 핵심 가치
- 경기장 선택 및 특정 경기 날짜 선택 시 해당 날짜의 정확한 기상 정보 제공
- KBO 공식 우천 취소 기준을 적용한 취소 확률 예측
- DB의 경기 일정 정보를 직관적으로 확인 가능

### 1.3 주요 기능
1. 경기장 선택 기능
2. 경기 날짜 선택 기능 (중기예보 가능 범위 내)
3. 선택 날짜 기상 정보 조회
4. 우천 취소 확률 예측
5. 경기장별 전체 경기 일정 조회 (DB 테이블 내용)

## 2. 사용자 시나리오

### 시나리오 1: 경기 관람 전 날씨 확인
1. 사용자가 웹 애플리케이션에 접속
2. 관람하고자 하는 경기장을 선택
3. 경기장 정보와 해당 경기장의 전체 경기 일정(DB 테이블) 확인
4. 관람하고자 하는 경기 날짜 선택 (중기예보 가능 범위 내)
5. 선택한 날짜의 기상 정보 및 우천 취소 확률 확인
6. 취소 가능성을 고려하여 관람 계획 수립

### 시나리오 2: 경기 일정 확인
1. 사용자가 특정 경기장의 모든 경기 일정을 확인하고 싶음
2. 경기장 선택
3. 해당 경기장의 전체 경기 일정을 테이블로 확인

## 3. 기능 요구사항 (Functional Requirements)

### FR-01: 경기장 선택 기능
- **설명**: 사용자가 KBO 경기장을 선택할 수 있는 기능
- **세부 사항**:
  - 드롭다운 형태로 경기장 목록 제공
  - 경기장 목록은 DB의 `game_schedules` 테이블에서 실제 사용되는 경기장만 표시
  - 경기장 선택 시 해당 경기장의 정보 표시 및 경기 날짜 선택 가능 상태로 전환

### FR-02: 경기 날짜 선택 기능
- **설명**: 선택한 경기장에 예정된 경기 날짜를 선택할 수 있는 기능
- **세부 사항**:
  - 경기장 선택 후에만 활성화
  - 경기일정은 DB의 `game_schedules` 테이블의 `game_date` 컬럼을 기준으로 표시
  - DB에 등록된 모든 경기 날짜를 표시 (중기예보 범위 제한 없음)
  - 날짜와 요일, 해당 날짜의 경기 수 표시
  - 날짜 선택 시 해당 날짜의 기상 정보 조회

### FR-03: 경기장별 전체 경기 일정 조회 기능
- **설명**: 경기장 선택 시 해당 경기장의 모든 경기 일정을 DB 테이블 형식으로 표시
- **세부 사항**:
  - 경기장 선택 시 자동으로 해당 경기장의 모든 경기 일정 조회
  - 테이블 형태로 표시 (ID, 날짜, 요일, 시간, 홈팀, 원정팀, 순위 등)
  - 날짜 순으로 정렬

### FR-04: 선택 날짜 기상 정보 조회
- **설명**: 선택한 경기장과 경기 일정에 대한 기상 정보를 조회하는 기능
- **세부 사항**:
  - 기상청 중기예보 조회서비스 API 활용
  - 날짜, 요일, 오전/오후 날씨, 최저/최고 온도, 강수 확률, 풍속, 습도 등 제공
  - 예보 발표 시각 정보 제공

### FR-05: 우천 취소 확률 예측
- **설명**: KBO 리그 우천 취소 기준을 바탕으로 취소 확률을 계산하고 표시
- **세부 사항**:
  - 확률 등급: HIGH, MEDIUM, LOW, NONE
  - 취소 사유 및 상세 정보 제공
  - 예측 요인 표시 (강수 확률, 날씨 상태, 풍속 등)
  - 돔 구장은 취소 확률 0% (NONE)
  - 경기 시작 3시간 전 결정 시점 정보 제공

### FR-06: 경기장 정보 표시
- **설명**: 선택한 경기장의 기본 정보를 표시
- **세부 사항**:
  - 경기장명, 위치, 경기장 유형(천연/인조/혼합, 돔 여부)
  - 해당 경기장을 사용하는 홈팀 목록

### FR-07: 경기 일정 정보 표시
- **설명**: 선택한 날짜와 경기장에 대한 경기 일정 정보 표시
- **세부 사항**:
  - 경기 시간, 홈팀 vs 원정팀
  - 팀 순위 정보 (있는 경우)

## 4. 비기능 요구사항 (Non-Functional Requirements)

### NFR-01: 성능
- 경기장 및 날짜 선택 후 2초 이내 기상 정보 표시
- API 응답 시간: 평균 1초 이내

### NFR-02: 사용성
- 직관적인 UI/UX 제공
- Chrome, Microsoft Edge 브라우저 최적화
- 반응형 디자인 (모바일, 태블릿, 데스크톱 지원)

### NFR-03: 안정성
- API 오류 시 적절한 에러 메시지 제공
- 네트워크 오류 시 재시도 기능

### NFR-04: 데이터 정확성
- 기상청 공식 API 데이터 사용
- KBO 공식 우천 취소 기준 준수

## 5. UI/UX 설계

### 화면 1: 메인 화면
- **헤더**: 서비스 제목 및 간단한 설명
- **경기장 선택 영역**: 드롭다운 형태
- **경기장 정보 영역**: 선택한 경기장의 기본 정보 표시
- **경기 일정 테이블 영역**: 선택한 경기장의 전체 경기 일정 표시 (DB 테이블)
- **경기 날짜 선택 영역**: 선택한 경기장의 예정된 날짜 목록
- **기상 정보 및 우천 취소 예측 영역**: 선택한 날짜의 정보 표시

### 화면 2: 에러 화면
- 에러 메시지 표시
- 재시도 옵션 제공

## 6. 데이터 모델

### 경기장 (Stadium)
- 경기장명 (stadiumName)
- 위치 (location)
- 중기예보 지역 코드 (regId)
- 경기장 유형 (stadiumType)
- 돔 여부 (isDome)
- 홈팀 목록 (homeTeams)

### 경기 일정 (GameSchedule)
- ID (id)
- 날짜 (date)
- 요일 (dayOfWeek)
- 경기장명 (stadiumName)
- 홈팀 (homeTeam, homeTeamName)
- 원정팀 (awayTeam, awayTeamName)
- 경기 시간 (gameTime)
- 팀 순위 (homeTeamRank, awayTeamRank)

### 기상 정보 (DailyWeather)
- 날짜 (date)
- 요일 (dayOfWeek)
- 오전/오후 날씨 (weatherAm, weatherPm)
- 최저/최고 온도 (minTemp, maxTemp)
- 강수 확률 (precipitationProb)
- 풍속 (windSpeed)
- 습도 (humidity)
- 예보 텍스트 (forecastText)

### 우천 취소 예측 (CancelPrediction)
- 확률 등급 (probability)
- 사유 (reason)
- 상세 정보 (details)
- 예측 요인 (factors)

## 7. API 요구사항

### 외부 API
- **기상청 중기예보 조회서비스**
  - URL: `http://apis.data.go.kr/1360000/MidFcstInfoService/getMidLandFcst`
  - 인증: 서비스 키 필요
  - 제공 범위: 발표일 기준 3일 후 ~ 10일 후

### 내부 API (백엔드)
- `GET /api/stadiums`: 경기장 목록 조회
- `GET /api/stadiums/:stadiumName/game-dates`: 경기장별 예정된 날짜 목록
- `GET /api/stadiums/:stadiumName/games`: 경기장별 전체 경기 일정 조회
- `GET /api/weather/:stadiumName/:date`: 기상 정보 및 우천 취소 예측

## 8. 기술 스택

### 프론트엔드
- React 18.x
- TypeScript
- Vite
- Tailwind CSS 3.x
- Axios

### 백엔드
- Node.js 18.x LTS+
- Express
- TypeScript
- Axios
- PostgreSQL (pg library)
- dotenv

### 데이터베이스
- PostgreSQL (Supabase)
- 테이블: `game_schedules`

## 9. 제약사항

1. 기상청 API는 발표일 기준 3~10일 후까지만 제공
2. 기상청 API는 일 2회(06:00, 18:00) 발표
3. 예보 데이터는 최근 24시간 내 발표된 것만 조회 가능

## 10. 성공 지표 (KPIs)

### KPI-01: 사용자 만족도
- 사용자 피드백 점수 (목표: 4.0/5.0 이상)

### KPI-02: 예측 정확도
- 실제 취소와 예측의 일치율 (목표: 70% 이상)

### KPI-03: 성능
- 평균 응답 시간 (목표: 2초 이내)

### KPI-04: 기능 사용률
- 경기장 선택 기능 사용률
- 경기 날짜 선택 기능 사용률
- 경기 일정 조회 기능 사용률

## 11. 가정 및 제외 사항

### 가정
- 사용자는 KBO 경기장명을 알고 있거나 쉽게 찾을 수 있음
- 사용자는 경기 날짜를 알고 있음
- 사용자는 Chrome 또는 Microsoft Edge 브라우저를 사용함

### 제외 사항
- 과거 날짜 기상 정보 제공 안 함
- 실시간 기상 정보 제공 안 함 (중기예보만 제공)
- 경기 일정 CRUD 기능은 별도 관리자 인터페이스에서 제공 (본 애플리케이션은 조회만)

## 12. 문서 변경 이력

### 버전 2.0 (2025-12-02)
- 구조 변경: 구단 선택에서 경기장 선택으로 변경
- 경기 날짜 선택 기능 추가
- 경기장별 전체 경기 일정 조회 기능 추가
- 선택 날짜 기상 정보 조회로 변경 (7일 일괄 조회에서)

### 버전 1.0 (초기 버전)
- 구단 선택 기반 7일 기상 정보 조회
- 우천 취소 예측 기능
